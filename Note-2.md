Aku susun **dua tabel**: **Unnormalized** (versi before splitting / repeating groups) dan **3NF** (versi final yang ternormalisasi). Tiap baris: Relasi, Kardinalitas (notasi 1 / N / M), Partisipasi (Total / Parsial) untuk kedua pihak, serta apakah itu **Agregasi** atau **Generalisasi**.

> Penjelasan singkat partisipasi:
>
> * **Total** = semua instansi di sisi itu *harus* punya pasangan (mandatory).
> * **Parsial** = bisa ada instansi tanpa pasangan (optional).

# Unnormalized (versi sebelum dipisah: banyak info digabung dalam satu tabel like `payment_un`, `person_un`, dll.)

| No | Relasi (A — B)                                                      |                           Kardinalitas (A : B) | Partisipasi A                                                  | Partisipasi B                             | Agregasi / Generalisasi / Catatan                                          |
| -: | ------------------------------------------------------------------- | ---------------------------------------------: | -------------------------------------------------------------- | ----------------------------------------- | -------------------------------------------------------------------------- |
|  1 | `payment_un` — `customer_un` (customer data disimpan dalam payment) | 1 : N (satu customer muncul di banyak payment) | Parsial (`payment_un` bisa ada tanpa customer? biasanya Total) | Parsial (customer bisa ada tanpa payment) | **Agregasi implisit** (payment menyimpan atribut customer secara redundan) |
|  2 | `payment_un` — `menu_items_list` (list string di satu kolom)        |             1 : N (one payment has many items) | Total (payment punya items)                                    | —                                         | Repeating group (tidak atomic)                                             |
|  3 | `payment_un` — `employee_un` (kasir info disimpan)                  |                                          1 : N | Parsial (payment biasanya punya kasir → Total)                 | Parsial (employee ada tanpa payment)      | Redundansi data pegawai di payment                                         |
|  4 | `reservation_un` — `customer_un`                                    |                                          1 : N | Total (reservation biasanya punya customer)                    | Parsial                                   | Tidak dinormalisasi: duplikasi data customer di reservation                |
|  5 | `book_loan_un` — `book_un` (info buku digabung text)                |                                          1 : N | Total (loan punya book)                                        | Parsial                                   | Buku info bisa duplikat di tiap row loan                                   |
|  6 | `person_un` — `role_un` (employee role disimpan text)               |                                          1 : N | Parsial                                                        | Parsial                                   | Role disimpan sebagai atribut text, bukan FK (redundansi)                  |
|  7 | `event_un` — `participants_list` (list di kolom event)              |                                          1 : N | Parsial                                                        | Parsial                                   | Repeating group untuk peserta                                              |
|  8 | `voucher_un` — `payment_un` (voucher code tersimpan di payment)     |                                          1 : N | Parsial                                                        | Parsial                                   | Voucher info duplikat bila voucher details disimpan di payment             |
|  9 | `feedback_un` — `customer_un`                                       |                                          1 : N | Total (feedback punya customer)                                | Parsial                                   | Simpel, namun customer data sering disalin ke feedback                     |
| 10 | `person_un` — `member_un` (member flag di person)                   |                                       1 : 0..1 | Parsial                                                        | Parsial                                   | Member hanya flag/kolom => **generalisasi tidak eksplisit** (tidak bagus)  |

> Catatan Unnormalized: banyak repeating groups dan duplikasi atribut person/menu di tabel transaksi — partisipasi kadang implicit (biasanya payment *harus* punya customer/employee).

---

# 3NF (versi final: tabel terpisah, FK jelas, dependencies diperbaiki)

| No | Relasi (A — B)                               |         Kardinalitas (A : B) | Partisipasi A                                                        | Partisipasi B                                                                  | Agregasi / Generalisasi / Catatan                                             |
| -: | -------------------------------------------- | ---------------------------: | -------------------------------------------------------------------- | ------------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
|  1 | `person` — `customer` (IS-A / generalisasi)  | 1 : 0..1 (person → customer) | Parsial (person bisa bukan customer)                                 | **Total** (setiap customer *harus* punya person)                               | **Generalisasi**: customer IS-A person                                        |
|  2 | `person` — `employee` (IS-A / generalisasi)  |                     1 : 0..1 | Parsial (person bisa bukan employee)                                 | **Total** (employee *harus* punya person)                                      | **Generalisasi**: employee IS-A person                                        |
|  3 | `customer` — `member` (IS-A / specialisasi)  |                     1 : 0..1 | Parsial (customer bisa bukan member)                                 | **Total** (member *harus* jadi customer)                                       | **Generalisasi**: member IS-A customer                                        |
|  4 | `customer` — `reservation`                   |                        1 : N | Parsial (customer bisa tanpa reservation)                            | **Total** (reservation harus ada customer)                                     | Relasi biasa; reservation *memiliki* customer (HAS-A)                         |
|  5 | `reservation` — `employee` (handled_by)      |                  0..N : 0..1 | Parsial (reservation bisa tanpa handled_by)                          | Parsial (employee bisa belum handle reservation)                               | Relasi biasa; optional                                                        |
|  6 | `payment` — `customer`                       |                        1 : N | Parsial (payment biasanya punya customer → **Total** pada payment)   | Parsial (customer bisa tanpa payment)                                          | Relasi biasa                                                                  |
|  7 | `payment` — `employee` (cashier recorded_by) |                        1 : N | Parsial (payment usually has employee)                               | Parsial                                                                        | Relasi biasa                                                                  |
|  8 | `payment` — `payment_line`                   |                        1 : N | **Total** (payment_line harus ada payment)                           | Parsial (payment bisa tanpa line? seharusnya Total untuk payment having lines) | **Agregasi**: payment **HAS MANY** payment_line                               |
|  9 | `payment_line` — `menu_item`                 |                        N : 1 | **Total** (line selalu merujuk menu_item)                            | Parsial (menu_item bisa tidak ter-order)                                       | Relasi biasa                                                                  |
| 10 | `menu_item` — `category_lookup`              |                        N : 1 | Parsial (menu_item harus punya category → **Total** untuk menu_item) | Parsial (category bisa ada tanpa menu_item)                                    | Lookup relation                                                               |
| 11 | `payment` — `payment_method`                 |                        N : 1 | Parsial (payment harus punya method → **Total** pada payment)        | Parsial                                                                        | Lookup relation                                                               |
| 12 | `payment` — `voucher`                        |                     N : 0..1 | Parsial (payment bisa tanpa voucher)                                 | Parsial (voucher bisa tidak dipakai)                                           | Relasi biasa                                                                  |
| 13 | `event` — `event_participant`                |                        1 : N | Parsial (event bisa tanpa participants)                              | **Total** pada participant (participant harus punya event)                     | **Agregasi**: event HAS MANY event_participant                                |
| 14 | `event_participant` — `customer`             |                        N : 1 | **Total** pada participant (participant harus punya customer)        | Parsial (customer bisa tidak ikut event)                                       | Junction untuk M:N event–customer                                             |
| 15 | `book` — `book_loan`                         |                        1 : N | Parsial (book bisa tidak dipinjam)                                   | **Total** pada loan (loan harus punya book)                                    | Agregasi loan HAS-A book                                                      |
| 16 | `customer` — `book_loan`                     |                        1 : N | Parsial (customer bisa tidak meminjam)                               | **Total** pada loan (loan harus punya borrower)                                | Relasi biasa                                                                  |
| 17 | `feedback` — `customer`                      |                        1 : N | Parsial (customer bisa tanpa feedback)                               | **Total** pada feedback                                                        | Relasi biasa                                                                  |
| 18 | `employee` — `role`                          |                        N : 1 | Parsial (employee harus punya role → **Total** pada employee)        | Parsial (role ada tanpa employee)                                              | Lookup relation                                                               |
| 19 | `reservation` — `status_lookup`              |                        N : 1 | **Total** pada reservation (status wajib)                            | Parsial (status bisa ada tanpa reservation)                                    | Lookup relation                                                               |
| 20 | `voucher` — `status_lookup`                  |                        N : 1 | Parsial (voucher harus punya status → **Total** pada voucher)        | Parsial                                                                        | Lookup relation                                                               |
| 21 | `menu_item` — `status_lookup` (availability) |                        N : 1 | **Total** pada menu_item                                             | Parsial                                                                        | Lookup relation                                                               |
| 22 | `employee` — `menu_item` (managed_by)        |  M : N (via `employee_menu`) | Parsial                                                              | Parsial                                                                        | M:N — gunakan junction `employee_menu` (Relasi manajemen, bukan generalisasi) |
| 23 | `person` — `audit_log` (actor_person_id)     |                        1 : N | Parsial                                                              | Parsial                                                                        | Audit: person dapat melakukan banyak aksi                                     |

---

# Ringkasan singkat (baby Jay):

* **Unnormalized**: banyak relasi implisit karena data digabung (repeating groups, duplikasi). Partisipasi sering tidak jelas karena satu tabel menyimpan info lain. Sifatnya lebih *denormalized* → gampang untuk baca tapi rawan inkonsistensi.
* **3NF**: relasi dipisah, FK jelas, partial/total partisipasi dinyatakan: transaksi (reservation, payment, loan, participant, payment_line) → **total** pada sisi transaksi (mereka *harus* punya FK), sedangkan lookup/general entity (status, category, person) → **parsial** karena mereka bisa ada tanpa terpakai.
