Berikut tabel verifikasi detil — tiap baris: kutipan ringkas dari skenario → interpretasi konseptual → tindakan desain (tabel/atribut/relasi/kardinalitas/partisipasi) → alasan.

| No | Kutipan/ Fakta (dari PDF)                                                                                                                                                               | Interpretasi konsep                                                                             | Tindakan desain (tabel / atribut / relasi + kardinalitas & partisipasi)                                                                                                                                                                                                                                                                                                                                           | Alasan / catatan                                                                                               |
| -: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
|  1 | “orang-orang yang datang untuk menikmati kopi—mereka yang punya nama dan kadang meninggalkan nomor kontak.”                                                                             | Ada entitas **pelanggan** dengan kontak opsional.                                               | Tabel `person` + `customer` (customer_id FK→person). Atribut: name, default_contact_id (nullable) atau tabel `contact` terpisah. Relasi: `person`→`customer` IS-A (1:0..1). Partisipasi: `customer` **total** pada `person`.                                                                                                                                                                                      | Customer bisa punya atau tidak punya kontak → kontak harus model terpisah bila multi-contact.                  |
|  2 | “beberapa pelanggan memilih jadi anggota tetap... nama, email, tanggal bergabung, nomor member unik.”                                                                                   | Ada subtype **member** dari customer.                                                           | Tabel `member` (member_id PK FK→customer.customer_id) dengan email, join_date, member_number (unique), promo_eligible. Generalization: `customer` → `member` (1:0..1). Partisipasi `member` total ke `customer`.                                                                                                                                                                                                  | Member adalah specialized customer; simpan promo rules di tabel terpisah jika kompleks.                        |
|  3 | “menu: nama, harga, deskripsi, kategori, status ketersediaan, foto”                                                                                                                     | Entitas `menu_item` lengkap.                                                                    | `menu_item`(menu_id PK, name, price, description, category_id FK, availability_status_id FK, image_url). Relasi: menu_item → category_lookup (N:1, parsial untuk category). Partisipasi: menu_item **total** punya category/status.                                                                                                                                                                               | Status ketersediaan dari lookup (`status_lookup`) supaya barista bisa ubah.                                    |
|  4 | “reservasi... membutuhkan tanggal, waktu, jumlah orang, catatan, dan status yang bisa berubah.”                                                                                         | Entitas `reservation` dengan status dinamis.                                                    | `reservation`(reservation_id PK, customer_id FK, date, time, party_size, note, status_id FK, handled_by_employee_id FK nullable). Relasi: customer 1:N reservation (customer optional), reservation → status_lookup (N:1). Partisipasi: reservation **total** → customer & status.                                                                                                                                | Status berubah dari dipesan → berjalan → selesai; simpan history jika perlu (log_status).                      |
|  5 | “kritik dan saran... isi pesan, tanggal, siapa yang mengirim.”                                                                                                                          | `feedback` entitas berhubungan ke customer.                                                     | `feedback`(feedback_id PK, customer_id FK, content, created_at). Relasi: customer 1:N feedback (customer parsial). Partisipasi: feedback **total** → customer.                                                                                                                                                                                                                                                    | Simpel; jika anonim, customer_id nullable.                                                                     |
|  6 | “pembayaran... ID unik, metode pembayaran, tanggal, waktu, nominal total, siapa pelanggan... diskon member atau voucher.”                                                               | Transaksi kompleks: header + line items + voucher/member discount + cashier.                    | `payment`(payment_id PK, customer_id FK nullable, employee_id FK, payment_datetime, payment_method_id FK, total_amount, voucher_code FK nullable). `payment_line`(payment_line_id PK, payment_id FK, menu_id FK, qty, price_each). Relasi: payment 1:N payment_line (agregasi). Kardinalitas: customer 1:N payment (customer optional) — partisipasi payment **total** membutuhkan payment_method & total_amount. | Jika allow guest checkout → customer_id nullable. Price_each captured to avoid price drift.                    |
|  7 | “voucher: kode unik, deskripsi, jenis, status berlaku, masa berlaku; ide promosi (Beli2Gratis1, diskon ulang tahun).”                                                                   | Entitas `voucher` + aturan promo (rule engine optional).                                        | `voucher`(code PK, description, voucher_type, discount_value, valid_from, valid_to, status_id FK). Relasi: voucher 1:N payment (voucher bisa dipakai banyak payment). Partisipasi: voucher parsial.                                                                                                                                                                                                               | Untuk promosi kompleks, buat `promo_rule` terpisah; voucher_type referensi ke category_lookup.                 |
|  8 | “event... nama event, tanggal mulai & selesai, deskripsi; setiap pesertanya terdaftar.”                                                                                                 | Entitas `event` dan junction `event_participant` ke customer.                                   | `event`(event_id PK, name, start_date, end_date, description). `event_participant`(event_id FK, customer_id FK, registration_date) PK composite (event_id, customer_id). Relasi: event 1:N event_participant; customer 1:N event_participant. Partisipasi: participant **total** → event & customer.                                                                                                              | M:N resolved via `event_participant`. Simpan role peserta jika diperlukan.                                     |
|  9 | “rak buku... entitas buku dengan judul, penerbit, penulis, tahun, genre, jumlah eksemplar; kadang pengunjung meminjamnya; catat siapa pinjam, kapan pinjam & kembali.”                  | Entitas `book` + `book_loan`.                                                                   | `book`(isbn PK, title, author, publisher, year, genre_id FK, copies_total). `book_loan`(loan_id PK, isbn FK, customer_id FK, loan_date, due_date, return_date nullable, status_id FK). Relasi: book 1:N book_loan; customer 1:N book_loan. Partisipasi: loan **total** → book & customer.                                                                                                                         | Kelola stok eksemplar via copies_total dan transaksi loan.                                                     |
| 10 | “pegawai... identitas—nama, username, password, alamat, nomor telepon—masing-masing memegang peran; ada yang mencatat transaksi, menangani buku, menyusun menu, mengurus promo/event.”  | Entitas `employee` (IS-A person) dengan role; kemungkinan M:N pegawai↔tugas/menu.               | `person` → `employee` (employee_id PK FK→person). `role`(role_id PK, role_name). `employee_role` jika multi-role (employee_id, role_id). Relasi: employee N:1 role (atau M:N jika multi role). Partisipasi: employee **total** → person.                                                                                                                                                                          | Jika pegawai punya banyak peran, gunakan junction `employee_role`. Also track who handled reservation/payment. |
| 11 | “kasir memproses total pesanan lengkap dengan diskon untuk member atau penggunaan voucher.”                                                                                             | Business rule: apply member discount + voucher at payment time; member status affects discount. | Saat desain: `payment` mencantumkan `member_discount_amount` (nullable) atau `applied_discounts` table. Simpan `member_id` / `customer_id` pada payment untuk audit.                                                                                                                                                                                                                                              | Simpan breakdown diskon agar audit laporan akurat.                                                             |
| 12 | Narasi emosional: “setiap kotak punya nyawa—garis punya cerita” → implies logging/audit/notes for entities.                                                                             | Perlu `audit_log` & `notes` fields.                                                             | `audit_log`(log_id, actor_person_id FK, action, target_table, target_id, timestamp, description). Tambah `notes` pada reservation, menu_item, event.                                                                                                                                                                                                                                                              | Mempermudah debugging & pelacakan perubahan (mis. status reservation).                                         |
| 13 | Beberapa contoh: pelanggan datang bersama teman (party_size) & catatan “dekat colokan”.                                                                                                 | Reservation harus menyimpan party_size & note.                                                  | `reservation.party_size` int; `reservation.note` varchar. Partisipasi: reservation terkait customer wajib (total).                                                                                                                                                                                                                                                                                                | Sudah dalam desain; pastikan tipe data cukup.                                                                  |
| 14 | Ada ide promo khusus (waktu terbatas, ulang tahun bulan itu).                                                                                                                           | Perlu model untuk promo rules & member eligibility (time window).                               | Opsional: `promo_rule`(rule_id, description, rule_type, params_json, active_from, active_to). `member` dapat punya `birthday_month` atau `dob` pada person untuk cek ulang tahun.                                                                                                                                                                                                                                 | Jika tugas tidak butuh rule engine, cukup jadikan note pada voucher & manual apply.                            |

---

# Rekomendasi perubahan / pengecekan yang perlu kamu terapkan (pragmatis)

1. **Person as universal table** — PDF menyebut pelanggan & pegawai; jadikan `person` sumber kebenaran untuk nama/alamat/telepon. (Mempermudah join antara reservation/pembayaran/feedback).
2. **Pisahkan payment → payment + payment_line** (PDF menyimpan nama pelanggan di payment — jangan lakukan itu di 3NF).
3. **Member sebagai table terpisah** (PDF punya atribut member khusus) — simpan nomor member unik & email.
4. **Event ↔ participant sebagai M:N** (PDF menyebut “setiap pesertanya pasti terdaftar”). Gunakan junction.
5. **Book loan tracking** wajib menyimpan loan_date, due_date, return_date. Document PDF menegaskan perlu dicatat.
6. **Voucher & promo**: buat kolom valid_from/valid_to & voucher_type; untuk promo kompleks sediakan `promo_rule` jika ingin otomatisasi.
7. **Status lookup** untuk reservation/menu/voucher/book_loan supaya status history & konsistensi.

---

# Ringkasan teknis singkat (apa yang berubah → final model)

* Hilangkan redundansi yang muncul di PDF (mis. menyimpan nama pelanggan di `payment`); ganti dengan FK. (1NF→2NF→3NF path jelas).
* Tambahkan entitas bantu yang PDF sebutkan tapi belum terstruktur: `contact` (opsional), `promo_rule` (opsional), `audit_log`.
* Tentukan partisipasi: transaksi seperti `payment`, `reservation`, `book_loan`, `payment_line`, `event_participant` — **harus** punya FK ke entitas induk (Total pada sisi transaksi).
